<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <table border='1' id='tabla'>
        <thead>

            <tr>
                <th>NUMERO</th>
                <th>NOMBRE</th>
                <th><a href="#">LOCALIDAD</a></th>

            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script src='js/jquery-3.5.1.min.js'></script>
    <script>
        $(document).ready(function () {
            cargarDepartamentos();
        });

        function cargarDepartamentos() {
            urlapi = 'https://apicruddepartamentoscore.azurewebsites.net/api/Departamentos';

            $.getJSON(urlapi, function (data) {
                var cont = 0;
                $.each(data, function (index, dept) {
                    //DEBEMOS CREAR LOS RESPECTIVOS <tr>, <td>, <a> para poder accceder a ellos
                    var tr = $('<tr>');
                    var tdNumero = $('<td>', { text: dept.numero });
                    var tdA = $('<td>');
                    var a = $('<a>', {
                        href: '#',
                        'data-id': dept.numero,
                        text: dept.nombre
                    });
                    var tdLocalidad = $('<td>', { text: dept.localidad });
                    /*<tr> -->tr
                        <td>10</td> --> tdNumero
                        <td> --> tdA
                            <a href="#" key-id="10">CONTABILIDAD</a> --> a
                        </td>
                        <td>ELCHE</td> -->tdLocalidad
                    </tr>*/
                    var todo = tr.append(tdNumero, tdA.append(a), tdLocalidad);
                    $('#tabla tbody').append(todo);
                    
                    
                    //CLICK A
                    $('a').click(function () {
                        //data-key ES UN ATRIBUTO DEBEMOS ACCEDER CON EL ATTRIBUTO .attr();
                        var dataid = $(this).attr('data-id');
                        console.log(dataid);

                        
                    });
                });
            })
            console.log('fuera de each');
        }
    </script>
</body>

</html>